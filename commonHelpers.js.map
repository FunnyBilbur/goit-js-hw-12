{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst form = document.querySelector('.form');\nconst inputSearch = document.querySelector('.input__search');\nconst gallery = document.querySelector(\".gallery\");\nconst load = document.querySelector(\".load\");\nconst loadMoreBtn = document.querySelector('button[data-action=\"load-more\"]');\nlet pageNumber = 1;\nlet perPageHits = 40;\nvar lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: '250' });\n\nconst createRequest = async () => {\n    loadMoreBtn.classList.add('isHidden');\n    load.classList.add('loader');\n    let searchParams = new URLSearchParams({\n        key: \"41527522-465889db431a6a06c19f4d10b\",\n        q: inputSearch.value.trim(),\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: pageNumber,\n        per_page: perPageHits,\n    });\n    await axios.get(`https://pixabay.com/api/?${searchParams}`)\n        .then((images) => {\n            let { total, hits, totalHits } = images.data;\n            if (total === 0) {\n                iziToast.show({\n                    titleColor: 'white',\n                    position: 'topRight',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    messageColor: 'white',\n                    backgroundColor: '#EF4040',\n                    progressBarColor: '#B51B1B'\n                });\n                load.classList.remove('loader');\n                return;\n            }\n            load.classList.remove('loader');\n            const markup = hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n                return `<li class=\"gallery__item\">\n                    <a class=\"gallery__link\" href=\"${largeImageURL}\">\n                        <img\n                            class=\"gallery__image\"\n                            src=\"${webformatURL}\"\n                            alt=\"${tags}\"/>\n                        <ul class=\"info__list\">\n                        <li class=\"info__item\">\n                        <span>Likes</span>\n                        <span>${likes}</span>\n                        </li>\n                        <li class=\"info__item\">\n                        <span>Views</span>\n                        <span>${views}</span>\n                        </li>\n                        <li class=\"info__item\">\n                        <span>Comments</span>\n                        <span>${comments}</span>\n                        </li>\n                        <li class=\"info__item\">\n                        <span>Downloads</span>\n                        <span>${downloads}</span>\n                        </li>\n                        </ul>\n            \n                    </a>\n            </li>`;\n            })\n                .join(\"\");\n            gallery.insertAdjacentHTML(\"beforeend\", markup);\n            lightbox.refresh();\n            loadMoreBtn.classList.remove('isHidden');\n            if (perPageHits * pageNumber >= totalHits) {\n                iziToast.show({\n                    titleColor: 'white',\n                    position: 'topRight',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    messageColor: 'white',\n                    backgroundColor: '#EF4040',\n                    progressBarColor: '#B51B1B'\n                });\n                loadMoreBtn.classList.add('isHidden');\n            }\n        })\n        .catch((error) => iziToast.show({\n            titleColor: 'white',\n            position: 'topRight',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            messageColor: 'white',\n            backgroundColor: '#EF4040',\n            progressBarColor: '#B51B1B'\n        }));\n\n}\n\nform.addEventListener('submit', async (arg) => {\n    arg.preventDefault();\n    gallery.innerHTML = \"\";\n    pageNumber = 1;\n    await createRequest();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    pageNumber += 1;\n    await createRequest();\n    let verticalScroll = gallery.firstElementChild.getBoundingClientRect().height * 2;\n    window.scrollBy({\n        top: verticalScroll,\n        behavior: \"smooth\",\n    });\n});"],"names":["form","inputSearch","gallery","load","loadMoreBtn","pageNumber","perPageHits","lightbox","SimpleLightbox","createRequest","searchParams","axios","images","total","hits","totalHits","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","error","arg","verticalScroll"],"mappings":"owBAIA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,iCAAiC,EAC5E,IAAIC,EAAa,EACbC,EAAc,GAClB,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,KAAK,CAAE,EAE5F,MAAMC,EAAgB,SAAY,CAC9BL,EAAY,UAAU,IAAI,UAAU,EACpCD,EAAK,UAAU,IAAI,QAAQ,EAC3B,IAAIO,EAAe,IAAI,gBAAgB,CACnC,IAAK,qCACL,EAAGT,EAAY,MAAM,KAAM,EAC3B,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMI,EACN,SAAUC,CAClB,CAAK,EACD,MAAMK,EAAM,IAAI,4BAA4BD,GAAc,EACrD,KAAME,GAAW,CACd,GAAI,CAAE,MAAAC,EAAO,KAAAC,EAAM,UAAAC,CAAS,EAAKH,EAAO,KACxC,GAAIC,IAAU,EAAG,CACbG,EAAS,KAAK,CACV,WAAY,QACZ,SAAU,WACV,QAAS,2EACT,aAAc,QACd,gBAAiB,UACjB,iBAAkB,SACtC,CAAiB,EACDb,EAAK,UAAU,OAAO,QAAQ,EAC9B,MACH,CACDA,EAAK,UAAU,OAAO,QAAQ,EAC9B,MAAMc,EAASH,EAAK,IAAI,CAAC,CAAE,aAAAI,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IACpF;AAAA,qDAC8BL;AAAA;AAAA;AAAA,mCAGlBD;AAAA,mCACAE;AAAA;AAAA;AAAA;AAAA,gCAIHC;AAAA;AAAA;AAAA;AAAA,gCAIAC;AAAA;AAAA;AAAA;AAAA,gCAIAC;AAAA;AAAA;AAAA;AAAA,gCAIAC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMnB,EACI,KAAK,EAAE,EACZtB,EAAQ,mBAAmB,YAAae,CAAM,EAC9CV,EAAS,QAAO,EAChBH,EAAY,UAAU,OAAO,UAAU,EACnCE,EAAcD,GAAcU,IAC5BC,EAAS,KAAK,CACV,WAAY,QACZ,SAAU,WACV,QAAS,6DACT,aAAc,QACd,gBAAiB,UACjB,iBAAkB,SACtC,CAAiB,EACDZ,EAAY,UAAU,IAAI,UAAU,EAEpD,CAAS,EACA,MAAOqB,GAAUT,EAAS,KAAK,CAC5B,WAAY,QACZ,SAAU,WACV,QAAS,2EACT,aAAc,QACd,gBAAiB,UACjB,iBAAkB,SACrB,CAAA,CAAC,CAEV,EAEAhB,EAAK,iBAAiB,SAAU,MAAO0B,GAAQ,CAC3CA,EAAI,eAAc,EAClBxB,EAAQ,UAAY,GACpBG,EAAa,EACb,MAAMI,EAAa,CACvB,CAAC,EAEDL,EAAY,iBAAiB,QAAS,SAAY,CAC9CC,GAAc,EACd,MAAMI,EAAa,EACnB,IAAIkB,EAAiBzB,EAAQ,kBAAkB,sBAAuB,EAAC,OAAS,EAChF,OAAO,SAAS,CACZ,IAAKyB,EACL,SAAU,QAClB,CAAK,CACL,CAAC"}